<Window x:Class="Dorothy.Views.SyncWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Dorothy.Views"
        Title="Sync to Cloud"
        Icon="pack://application:,,,/Resources/icon.ico"
        WindowStyle="SingleBorderWindow" 
        Height="700" 
        Width="1100"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        MinHeight="600"
        MinWidth="900"
        Background="#F3F4F6">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,12">
            <TextBlock Text="Sync to Cloud"
                       FontSize="20"
                       FontWeight="Bold"
                       Foreground="#111827"
                       Margin="0,0,0,8"/>
            <TextBlock Text="Select attack logs and/or assets to sync, delete, or skip. Enter a project name to organize your data."
                       FontSize="12"
                       Foreground="#6B7280"/>
        </StackPanel>
        
        <!-- Project Name Input -->
        <Border Grid.Row="1"
                Background="White"
                BorderBrush="#E5E7EB"
                BorderThickness="1"
                CornerRadius="8"
                Padding="16"
                Margin="0,0,0,12">
            <StackPanel>
                <TextBlock Text="Project Name (Optional)"
                           FontSize="14"
                           FontWeight="SemiBold"
                           Foreground="#111827"
                           Margin="0,0,0,8"/>
                <TextBox x:Name="ProjectNameTextBox"
                         Height="32"
                         Padding="8,6"
                         BorderBrush="#D1D5DB"
                         BorderThickness="1"
                         Background="White"
                         FontSize="14"
                         TextChanged="ProjectNameTextBox_TextChanged"/>
                <TextBlock Text="Leave empty to use existing project names"
                           FontSize="11"
                           Foreground="#9CA3AF"
                           Margin="0,4,0,0"/>
            </StackPanel>
        </Border>
        
        <!-- Tabs for Logs and Assets -->
        <TabControl Grid.Row="2">
            <TabItem Header="Attack Logs" x:Name="LogsTab">
                <Grid Margin="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Logs Count -->
                    <TextBlock Grid.Row="0" 
                               x:Name="LogsCountText"
                               Text="0 pending logs"
                               FontSize="12"
                               Foreground="#6B7280"
                               Margin="0,0,0,8"/>
                    
                    <!-- Logs DataGrid -->
                    <Border Grid.Row="1"
                            Background="White"
                            BorderBrush="#E5E7EB"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="16">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Select All -->
                            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,12">
                                <CheckBox x:Name="SelectAllLogsCheckBox"
                                          Content="Select All"
                                          FontSize="14"
                                          FontWeight="SemiBold"
                                          Foreground="#111827"
                                          Checked="SelectAllLogsCheckBox_Checked"
                                          Unchecked="SelectAllLogsCheckBox_Unchecked"
                                          Margin="0,0,16,0"/>
                                <TextBlock x:Name="SelectedLogsCountText"
                                           Text="0 selected"
                                           FontSize="12"
                                           Foreground="#6B7280"
                                           VerticalAlignment="Center"/>
                            </StackPanel>

                            <!-- DataGrid -->
                            <DataGrid x:Name="LogsDataGrid"
                                      Grid.Row="1"
                                      AutoGenerateColumns="False"
                                      CanUserAddRows="False"
                                      CanUserDeleteRows="False"
                                      SelectionMode="Extended"
                                      SelectionUnit="FullRow"
                                      HeadersVisibility="Column"
                                      GridLinesVisibility="None"
                                      BorderThickness="0"
                                      Background="White"
                                      MaxHeight="400"
                                      ScrollViewer.VerticalScrollBarVisibility="Auto"
                                      ScrollViewer.HorizontalScrollBarVisibility="Auto">
                                <DataGrid.Columns>
                                    <DataGridCheckBoxColumn Header="Sync" Binding="{Binding IsSelected}" Width="50"/>
                                    <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50" IsReadOnly="True"/>
                                    <DataGridTextColumn Header="Attack Type" Binding="{Binding AttackType}" Width="120" IsReadOnly="True"/>
                                    <DataGridTextColumn Header="Protocol" Binding="{Binding Protocol}" Width="80" IsReadOnly="True"/>
                                    <DataGridTextColumn Header="Target IP" Binding="{Binding TargetIp}" Width="120" IsReadOnly="True"/>
                                    <DataGridTextColumn Header="Packets" Binding="{Binding PacketsSent, StringFormat=N0}" Width="80" IsReadOnly="True"/>
                                    <DataGridTextColumn Header="Start Time" Binding="{Binding StartTime, StringFormat=yyyy-MM-dd HH:mm:ss}" Width="150" IsReadOnly="True"/>
                                    <DataGridTextColumn Header="Project" Binding="{Binding ProjectName}" Width="100" IsReadOnly="True"/>
                                </DataGrid.Columns>
                            </DataGrid>

                            <!-- Action Buttons -->
                            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
                                <Button x:Name="DeleteSelectedLogsButton"
                                        Content="Delete Selected"
                                        Width="120"
                                        Height="32"
                                        Margin="0,0,8,0"
                                        Style="{StaticResource DefaultButton}"
                                        Click="DeleteSelectedLogsButton_Click"/>
                                <Button x:Name="SkipSelectedLogsButton"
                                        Content="Skip Selected"
                                        Width="120"
                                        Height="32"
                                        Margin="0,0,8,0"
                                        Style="{StaticResource DefaultButton}"
                                        Click="SkipSelectedLogsButton_Click"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>
            
            <TabItem Header="Assets" x:Name="AssetsTab">
                <Grid Margin="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Assets Count -->
                    <TextBlock Grid.Row="0" 
                               x:Name="AssetsCountText"
                               Text="0 pending assets"
                               FontSize="12"
                               Foreground="#6B7280"
                               Margin="0,0,0,8"/>
                    
                    <!-- Assets DataGrid -->
                    <Border Grid.Row="1"
                            Background="White"
                            BorderBrush="#E5E7EB"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="12">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Select All -->
                            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,12">
                                <CheckBox x:Name="SelectAllAssetsCheckBox"
                                          Content="Select All"
                                          FontSize="14"
                                          FontWeight="SemiBold"
                                          Foreground="#111827"
                                          Checked="SelectAllAssetsCheckBox_Checked"
                                          Unchecked="SelectAllAssetsCheckBox_Unchecked"
                                          Margin="0,0,16,0"/>
                                <TextBlock x:Name="SelectedAssetsCountText"
                                           Text="0 selected"
                                           FontSize="12"
                                           Foreground="#6B7280"
                                           VerticalAlignment="Center"/>
                            </StackPanel>

                            <!-- DataGrid -->
                            <DataGrid x:Name="AssetsDataGrid"
                                      Grid.Row="1"
                                      AutoGenerateColumns="False"
                                      CanUserAddRows="False"
                                      CanUserDeleteRows="False"
                                      SelectionMode="Extended"
                                      SelectionUnit="FullRow"
                                      HeadersVisibility="Column"
                                      GridLinesVisibility="None"
                                      BorderThickness="0"
                                      Background="White"
                                      MaxHeight="400"
                                      ScrollViewer.VerticalScrollBarVisibility="Auto"
                                      ScrollViewer.HorizontalScrollBarVisibility="Auto">
                                <DataGrid.Columns>
                                    <DataGridCheckBoxColumn Header="Sync" Binding="{Binding IsSelected}" Width="50"/>
                                    <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50" IsReadOnly="True"/>
                                    <DataGridTextColumn Header="IP Address" Binding="{Binding HostIp}" Width="120" IsReadOnly="True"/>
                                    <DataGridTextColumn Header="Hostname" Binding="{Binding HostName}" Width="150" IsReadOnly="True"/>
                                    <DataGridTextColumn Header="MAC Address" Binding="{Binding MacAddress}" Width="130" IsReadOnly="True"/>
                                    <DataGridTextColumn Header="Vendor" Binding="{Binding Vendor}" Width="120" IsReadOnly="True"/>
                                    <DataGridTextColumn Header="Status" Width="80" IsReadOnly="True">
                                        <DataGridTextColumn.Binding>
                                            <Binding Path="IsOnline">
                                                <Binding.Converter>
                                                    <local:BoolToStatusConverter/>
                                                </Binding.Converter>
                                            </Binding>
                                        </DataGridTextColumn.Binding>
                                    </DataGridTextColumn>
                                    <DataGridTextColumn Header="Scan Time" Binding="{Binding ScanTime, StringFormat=yyyy-MM-dd HH:mm}" Width="140" IsReadOnly="True"/>
                                </DataGrid.Columns>
                            </DataGrid>

                            <!-- Action Buttons -->
                            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
                                <Button x:Name="DeleteSelectedAssetsButton"
                                        Content="Delete Selected"
                                        Width="120"
                                        Height="32"
                                        Margin="0,0,8,0"
                                        Style="{StaticResource DefaultButton}"
                                        Click="DeleteSelectedAssetsButton_Click"/>
                                <Button x:Name="SkipSelectedAssetsButton"
                                        Content="Skip Selected"
                                        Width="120"
                                        Height="32"
                                        Margin="0,0,8,0"
                                        Style="{StaticResource DefaultButton}"
                                        Click="SkipSelectedAssetsButton_Click"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>
        </TabControl>

        <!-- Summary and Buttons -->
        <StackPanel Grid.Row="3"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right">
            <TextBlock x:Name="TotalSelectedText"
                       Text="0 logs, 0 assets selected"
                       FontSize="12"
                       Foreground="#6B7280"
                       VerticalAlignment="Center"
                       Margin="0,0,16,0"/>
            <Button x:Name="CancelButton"
                    Content="Cancel"
                    Width="100"
                    Height="36"
                    Margin="0,0,8,0"
                    Click="CancelButton_Click"/>
            <Button x:Name="SyncButton"
                    Content="Sync Selected"
                    Width="120"
                    Height="36"
                    Click="SyncButton_Click"
                    Background="#111827"
                    Foreground="White"
                    BorderThickness="0"/>
        </StackPanel>
    </Grid>
</Window>

